{"ast":null,"code":"var _temp,\n    _jsxFileName = \"/home/marco/Documents/Job/Interviews/ProctorExam/Pokemon-list/client/src/components/PokemonListContainer.jsx\";\n\nimport React, { PureComponent } from 'react';\nimport request from 'superagent';\nimport PokemonList from './PokemonList';\nimport PokemonDetails from './PokemonDetails';\nimport PokemonSearchForm from './PokemonSearchForm';\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Link } from \"react-router-dom\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { connect } from 'react-redux';\nimport { logout } from '../actions/auth';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  },\n  container: {\n    padding: 24 // flexWrap: \"wrap\"\n\n  },\n  paper: {\n    padding: 32\n  },\n  user: {\n    marginRight: 32\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  }\n});\n\nconst PokemonListContainer = withStyles(styles)((_temp = class extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.showDetails = name => {\n      request(\"http://localhost:4001/pokemons/\".concat(name)).then(response => {\n        this.checkFavorite(response.body.pokemon, this.state.favorites);\n        this.setState({\n          selected: response.body.pokemon\n        });\n      });\n    };\n\n    this.changeFavorite = event => {\n      console.log(\"ciao   \" + event.target.checked);\n      const pokemonName = this.state.selected.name;\n      console.log(\"NAME \" + pokemonName);\n      this.setState({\n        favorite: event.target.checked\n      });\n\n      if (event.target.checked) {\n        //Add element to favorites in the state\n        //FIX with ...state\n        const newFavoritesList = this.state.favorites;\n        newFavoritesList.push(this.state.selected.id);\n        this.setState({\n          favorites: newFavoritesList\n        });\n        request.post(\"http://localhost:4001/users/\".concat(this.props.currentUser.userId)).query({\n          name: pokemonName\n        }); // .then(response => {\n        //   //FIX with ...state\n        //   const newFavoritesList = this.state.favorites\n        //   newFavoritesList.push(response.body.pokemonId)\n        //   this.setState({ favorites: newFavoritesList })\n        //})\n      } else {\n        //Remove element from favorites in the state\n        const newFavoritesList = this.state.favorites.filter(fav => fav !== this.state.selected.id);\n        this.setState({\n          favorites: newFavoritesList\n        });\n        request.del(\"http://localhost:4001/users/\".concat(this.props.currentUser.userId)).query({\n          name: pokemonName\n        }); // .then(response => {\n        //   const newFavoritesList = this.state.favorites.filter(fav => fav !== response.body.pokemonId)\n        //   this.setState({ favorites: newFavoritesList })\n        // })\n      }\n    };\n\n    this.checkFavorite = selected => {\n      request(\"http://localhost:4001/pokemons/favorites/\".concat(this.props.currentUser.userId)).then(response => {\n        const favorites = response.body.favorites.map(elem => elem.pokemonId);\n\n        if (favorites.includes(selected.id)) {\n          this.setState({\n            favorite: true\n          });\n        } else {\n          this.setState({\n            favorite: false\n          });\n        }\n      });\n    };\n\n    this.loggingOut = () => {\n      this.props.logout();\n    };\n\n    this.state = {\n      pokemons: null,\n      selected: null,\n      favorites: null,\n      favorite: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    //Get all pokemons\n    request('http://localhost:4001/pokemons').then(response => {\n      this.setState({\n        pokemons: response.body.pokemons\n      });\n    }).then(() => {\n      //Request \n      //UNCOMMNET TODO\n      request(\"http://localhost:4001/pokemons/favorites/\".concat(this.props.currentUser.userId)).then(response => {\n        const favorites = response.body.favorites.map(elem => elem.pokemonId);\n        this.setState({\n          favorites: favorites\n        });\n      });\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log(JSON.stringify(this.state)); //Search pokemon\n\n    request('http://localhost:4001/pokemons').query({\n      name: this.state.searchKey\n    }).then(response => {\n      this.setState({\n        pokemons: response.body.pokemons\n      });\n    }); //Update list     \n  }\n\n  render() {\n    const classes = this.props.classes;\n    if (!this.state.pokemons) return \"Loading...\";\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      className: classes.container,\n      justify: \"space-evenly\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      className: classes.container,\n      direction: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(PokemonSearchForm, {\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(PokemonList, {\n      pokemons: this.state.pokemons,\n      showDetails: this.showDetails,\n      favorites: this.state.favorites,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))))), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      justify: \"space-between\",\n      alignItems: \"baseline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      className: classes.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      label: \"Username\",\n      className: classes.textField,\n      value: this.props.currentUser && this.props.currentUser.username,\n      margin: \"normal\",\n      variant: \"outlined\",\n      InputProps: {\n        readOnly: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"button\",\n      onClick: this.loggingOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Log Out\"))))), React.createElement(Grid, {\n      item: true,\n      className: classes.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(PokemonDetails, {\n      selected: this.state.selected,\n      changeFavorite: this.changeFavorite,\n      favorite: this.state.favorite,\n      currentUser: this.props.currentUser,\n      loggingOut: this.loggingOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }))))));\n  }\n\n}, _temp));\n\nconst mapStateToProps = function (state) {\n  return {\n    currentUser: state.currentUser,\n    error: state.login.error\n  };\n}; // < Grid container className = { classes.container } direction = \"column\" >\n//   <Grid item container justify=\"space-evenly\" alignItems=\"flex-end\">\n//     <Grid item>\n//       <PokemonSearchForm handleSubmit={this.handleSubmit} handleChange={this.handleChange} />\n//     </Grid>\n//     <Grid item>\n//       <Grid container alignItems=\"baseline\">\n//         <Grid item className={classes.user}>\n//           <Typography variant=\"h3\">\n//             {this.props.currentUser && this.props.currentUser.username}\n//           </Typography>\n//         </Grid>\n//         <Grid item>\n//           <Link to=\"/login\">\n//             <Button type=\"button\" onClick={this.loggingOut}>Log Out</Button>\n//           </Link>\n//         </Grid>\n//       </Grid>\n//     </Grid>\n//   </Grid>\n//   <Grid item container justify=\"space-evenly\">\n//     <Grid item>\n//       <PokemonList pokemons={this.state.pokemons} showDetails={this.showDetails}\n//         favorites={this.state.favorites} />\n//     </Grid>\n//     <Grid item className={classes.paper}>\n//       <PokemonDetails selected={this.state.selected} changeFavorite={this.changeFavorite}\n//         favorite={this.state.favorite} currentUser={this.props.currentUser} loggingOut={this.loggingOut} />\n//     </Grid>\n//   </Grid>\n//         </Grid >\n\n\nexport default connect(mapStateToProps, {\n  logout\n})(PokemonListContainer);","map":{"version":3,"sources":["/home/marco/Documents/Job/Interviews/ProctorExam/Pokemon-list/client/src/components/PokemonListContainer.jsx"],"names":["React","PureComponent","request","PokemonList","PokemonDetails","PokemonSearchForm","Grid","Button","Typography","TextField","Link","withStyles","connect","logout","styles","theme","root","flexGrow","container","padding","paper","user","marginRight","textField","marginLeft","spacing","PokemonListContainer","constructor","props","showDetails","name","then","response","checkFavorite","body","pokemon","state","favorites","setState","selected","changeFavorite","event","console","log","target","checked","pokemonName","favorite","newFavoritesList","push","id","post","currentUser","userId","query","filter","fav","del","map","elem","pokemonId","includes","loggingOut","pokemons","handleChange","bind","handleSubmit","componentDidMount","value","preventDefault","JSON","stringify","searchKey","render","classes","username","readOnly","mapStateToProps","error","login"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport request from 'superagent'\nimport PokemonList from './PokemonList'\nimport PokemonDetails from './PokemonDetails'\nimport PokemonSearchForm from './PokemonSearchForm'\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Link } from \"react-router-dom\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { connect } from 'react-redux'\nimport { logout } from '../actions/auth'\n\n\n\nconst styles = (theme) => ({\n  root: {\n    flexGrow: 1\n  },\n  container: {\n    padding: 24\n    // flexWrap: \"wrap\"\n  },\n  paper: {\n    padding: 32\n  },\n  user: {\n    marginRight: 32\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n  },\n});\n\n\nconst PokemonListContainer = withStyles(styles)(\n  class extends PureComponent {\n\n    constructor(props) {\n      super(props)\n      this.state = {\n        pokemons: null,\n        selected: null,\n        favorites: null,\n        favorite: false\n      }\n      this.handleChange = this.handleChange.bind(this)\n      this.handleSubmit = this.handleSubmit.bind(this)\n    }\n\n    componentDidMount() {\n      //Get all pokemons\n      request('http://localhost:4001/pokemons')\n        .then(response => {\n          this.setState({ pokemons: response.body.pokemons })\n        })\n        .then(() => {\n          //Request \n          //UNCOMMNET TODO\n          request(`http://localhost:4001/pokemons/favorites/${this.props.currentUser.userId}`)\n            .then(response => {\n              const favorites = response.body.favorites.map(elem => (elem.pokemonId))\n              this.setState({ favorites: favorites })\n            })\n        })\n\n    }\n\n    handleChange(event) {\n      this.setState({ [event.target.name]: event.target.value })\n    }\n\n    handleSubmit(event) {\n      event.preventDefault()\n      console.log(JSON.stringify(this.state))\n      //Search pokemon\n      request('http://localhost:4001/pokemons')\n        .query({ name: this.state.searchKey })\n        .then(response => {\n          this.setState({ pokemons: response.body.pokemons })\n        })\n      //Update list     \n    }\n\n    showDetails = (name) => {\n      request(`http://localhost:4001/pokemons/${name}`)\n        .then(response => {\n          this.checkFavorite(response.body.pokemon, this.state.favorites)\n          this.setState({ selected: response.body.pokemon })\n        })\n    }\n\n    changeFavorite = (event) => {\n      console.log(\"ciao   \" + event.target.checked)\n\n      const pokemonName = this.state.selected.name\n      console.log(\"NAME \" + pokemonName)\n      this.setState({ favorite: event.target.checked });\n      if (event.target.checked) {\n        //Add element to favorites in the state\n        //FIX with ...state\n        const newFavoritesList = this.state.favorites\n        newFavoritesList.push(this.state.selected.id)\n        this.setState({ favorites: newFavoritesList })\n        request\n          .post(`http://localhost:4001/users/${this.props.currentUser.userId}`)\n          .query({ name: pokemonName })\n        // .then(response => {\n        //   //FIX with ...state\n        //   const newFavoritesList = this.state.favorites\n        //   newFavoritesList.push(response.body.pokemonId)\n        //   this.setState({ favorites: newFavoritesList })\n        //})\n      } else {\n        //Remove element from favorites in the state\n        const newFavoritesList = this.state.favorites.filter(fav => fav !== this.state.selected.id)\n        this.setState({ favorites: newFavoritesList })\n        request\n          .del(`http://localhost:4001/users/${this.props.currentUser.userId}`)\n          .query({ name: pokemonName })\n        // .then(response => {\n        //   const newFavoritesList = this.state.favorites.filter(fav => fav !== response.body.pokemonId)\n        //   this.setState({ favorites: newFavoritesList })\n        // })\n      }\n    }\n\n    checkFavorite = (selected) => {\n      request(`http://localhost:4001/pokemons/favorites/${this.props.currentUser.userId}`)\n        .then(response => {\n          const favorites = response.body.favorites.map(elem => (elem.pokemonId))\n          if (favorites.includes(selected.id)) {\n            this.setState({ favorite: true })\n          } else {\n            this.setState({ favorite: false })\n          }\n        })\n    }\n\n\n    loggingOut = () => {\n      this.props.logout()\n    }\n\n\n    render() {\n\n      const { classes } = this.props\n\n      if (!this.state.pokemons) return \"Loading...\"\n\n      return (\n        <div>\n          <Grid container className={classes.container} justify=\"space-evenly\">\n            <Grid item>\n              <Grid container className={classes.container} direction=\"column\">\n                <Grid item>\n                  <PokemonSearchForm handleSubmit={this.handleSubmit} handleChange={this.handleChange} />\n                </Grid>\n\n                <Grid item>\n                  <Grid container>\n                    <PokemonList pokemons={this.state.pokemons} showDetails={this.showDetails}\n                      favorites={this.state.favorites} />\n                  </Grid>\n                </Grid>\n\n              </Grid>\n            </Grid>\n\n            <Grid item>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  <Grid container justify=\"space-between\" alignItems=\"baseline\">\n                    <Grid item className={classes.user}>\n                      {/* <Typography variant=\"h3\">\n                        {this.props.currentUser && this.props.currentUser.username}\n                      </Typography> */}\n                      <TextField\n                        label=\"Username\"\n                        className={classes.textField}\n                        value={this.props.currentUser && this.props.currentUser.username}\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        InputProps={{\n                          readOnly: true,\n                        }}\n                      />\n                    </Grid>\n                    <Grid item>\n                      <Link to=\"/login\">\n                        <Button type=\"button\" onClick={this.loggingOut}>Log Out</Button>\n                      </Link>\n                    </Grid>\n                  </Grid>\n                </Grid>\n\n                <Grid item className={classes.paper}>\n                  <PokemonDetails selected={this.state.selected} changeFavorite={this.changeFavorite}\n                    favorite={this.state.favorite} currentUser={this.props.currentUser} \n                      loggingOut={this.loggingOut} />\n                </Grid>\n              </Grid>\n\n            </Grid>\n          </Grid>\n        </div>)\n    }\n  }\n)\n\nconst mapStateToProps = function (state) {\n  return {\n    currentUser: state.currentUser,\n    error: state.login.error\n  }\n}\n\n// < Grid container className = { classes.container } direction = \"column\" >\n\n//   <Grid item container justify=\"space-evenly\" alignItems=\"flex-end\">\n//     <Grid item>\n//       <PokemonSearchForm handleSubmit={this.handleSubmit} handleChange={this.handleChange} />\n//     </Grid>\n\n//     <Grid item>\n//       <Grid container alignItems=\"baseline\">\n//         <Grid item className={classes.user}>\n//           <Typography variant=\"h3\">\n//             {this.props.currentUser && this.props.currentUser.username}\n//           </Typography>\n//         </Grid>\n//         <Grid item>\n//           <Link to=\"/login\">\n//             <Button type=\"button\" onClick={this.loggingOut}>Log Out</Button>\n//           </Link>\n//         </Grid>\n//       </Grid>\n//     </Grid>\n\n//   </Grid>\n\n//   <Grid item container justify=\"space-evenly\">\n//     <Grid item>\n//       <PokemonList pokemons={this.state.pokemons} showDetails={this.showDetails}\n//         favorites={this.state.favorites} />\n//     </Grid>\n//     <Grid item className={classes.paper}>\n//       <PokemonDetails selected={this.state.selected} changeFavorite={this.changeFavorite}\n//         favorite={this.state.favorite} currentUser={this.props.currentUser} loggingOut={this.loggingOut} />\n//     </Grid>\n//   </Grid>\n\n//         </Grid >\n\n\n\nexport default connect(mapStateToProps, { logout })(PokemonListContainer)"]},"metadata":{},"sourceType":"module"}